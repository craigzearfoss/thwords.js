$(document).ready(function(){$(".game-link").on("click",function(e){return ga("Game","select",$(this).data("id")+": "+$(this).data("name")),!0});var e=document.location.toString();$("#embed-link").val('<iframe height="440" width="420" src="'+e+(e.indexOf("?")<0?"?":"&")+'e=1" frameborder="0" allowfullscreen></iframe>'),$("#btn-embed-link").on("click",function(e){try{var t=$.cookie("Woggle-game"),o=t?$.parseJSON(t):{};$.isEmptyObject(t)||ga("send","event",o.id+": "+o.gn,"share-embed",$("#embed-link").val())}catch(n){}$("#container-link-link").hide(),$("#container-embed-link").show(),$("#embed-link").select()}),$("#close-embed-link").on("click",function(e){e.preventDefault(),$("#container-embed-link").hide()});var t=document.location.toString();$("#link-link").val(t+(t.indexOf("?")<0?"?":"&")+"s=1"),$("#btn-link-link").on("click",function(e){try{var t=$.cookie("Woggle-game"),o=t?$.parseJSON(t):{};$.isEmptyObject(t)||ga("send","event",o.id+": "+o.gn,"share-link",$("#link-link").val())}catch(n){}$("#container-embed-link").hide(),$("#container-link-link").show(),$("#link-link").select()}),$("#close-link-link").on("click",function(e){e.preventDefault(),$("#container-link-link").hide()})}),$(document).ready(function(){!function(){function e(e){if(!e)return"";for(var t="",o=0;o<e.length;o++)t+=vo[e.charAt(o)]||e.charAt(o);return t}function t(){jo.addToTotal("move",1),jo.addToCount("move",1),jo.setProperty("move-remaining",jo.move.max-jo.move.total),jo.store(),jo.setProperty("hitStreak-current",jo.hitStreak.current+1,!0),Co.hitStreak.current>Co.hitStreak["long"]&&jo.setProperty("hitStreak-long",jo.hitStreak["long"]+1,!0),le()}function o(e){var e=parseInt(e);try{jo.addToCount("point",e)}catch(t){console.log(t),$o.ga("Error","addPoints",t.toString())}le()}function n(){for(var e=!0,t=0;t<jo.thwords.tls.length;t++)s(t)||(e=!1);return e}function s(e,t){t=t||!1;try{for(var o=0;o<jo.thwords.tls[e].length;o++)if(!jo.thwords.tls[e][o].s)return t&&$("#answer-"+e).removeClass("solved").addClass("wrong"),!1}catch(n){console.log(n),$o.ga("Error","allTilesSolved",n.toString())}return $("#answer-"+e).hasClass("solved")||($("#answer-"+e).addClass("solved"),jo.addToCount("thword",1,!0)),$("#answer-"+e+" > .aux2").removeClass("hide").addClass("show"),!0}function a(){window.onbeforeunload=function(){return!$.isEmptyObject(Co)&&"undefined"!=typeof Co.status&&Co.status?"If you leave this page you will lose your current game?":void 0},$(".quit-game").on("click",function(e){e.preventDefault(),se()}),$(".save-and-exit-game").on("click",function(e){e.preventDefault(),je()}),$(".select-foreign-thword").on("click",function(e){e.preventDefault(),Po(this)}),$(".start-game").on("click",function(e){e.preventDefault(),ot(this)&&We()}),Se()}function r(){switch($(".close-ad").on("click",function(e){e.preventDefault(),F()}),parseInt($o.getProperty("showAds"))){case 1:$(".next-round-link").on("click",function(e){e.preventDefault(),De(),Ke()});break;case 2:$(".next-round-link").on("click",function(e){window.onbeforeunload=function(){}});break;case 0:default:$(".next-round-link").on("click",function(e){e.preventDefault(),Ke()})}}function l(){$("#btn-topic-feedback-cancel").on("click",function(e){e.preventDefault(),$("#overlay-background").removeClass("show").addClass("hide"),$("#overlay-topic-feedback-container").removeClass("show").addClass("hide")}),$("#btn-topic-feedback-submit-comment").on("click",function(e){e.preventDefault();try{jo.ga(jo.id+": "+jo.name,"topic-comment",jo.topic.id+": "+$("#topic-feedback-text").val()),$("#btn-topic-comment").addClass("disabled"),$("#overlay-background").removeClass("show").addClass("hide"),$("#overlay-topic-feedback-container").removeClass("show").addClass("hide")}catch(t){}}),$("#btn-topic-feedback-submit-problem").on("click",function(e){e.preventDefault();try{jo.ga(jo.id+": "+jo.name,"topic-problem",jo.topic.id+": "+$("#topic-feedback-text").val()),$("#btn-topic-problem").addClass("disabled"),$("#overlay-background").removeClass("show").addClass("hide"),$("#overlay-topic-feedback-container").removeClass("show").addClass("hide")}catch(t){}}),$("#btn-topic-dislike").on("click",function(e){e.preventDefault();try{$(this).hasClass("disabled")?U("You already said you liked this topic.",{type:"fail",timeout:2e3}):$(this).hasClass("clicked")?U("You already said you dislike this topic.",{type:"fail",timeout:2e3}):("undefined"!=typeof jo.topic.id&&jo.topic.id>0&&(jo.ga(jo.id+": "+jo.name,"topic-dislike",jo.topic.id+": "+jo.topic.name),U("Thank you for your feedback.",{type:"success",timeout:2e3})),$(this).addClass("clicked"),$("#btn-topic-like").addClass("disabled"))}catch(t){}}),$("#btn-topic-like").on("click",function(e){e.preventDefault();try{$(this).hasClass("disabled")?U("You already said you disliked this topic.",{type:"fail",timeout:2e3}):$(this).hasClass("clicked")?U("You already said you like this topic.",{type:"fail",timeout:2e3}):("undefined"!=typeof jo.topic.id&&jo.topic.id>0&&(jo.ga(jo.id+": "+jo.name,"topic-like",jo.topic.id+": "+jo.topic.name),U("Thank you for your feedback.",{type:"success",timeout:2e3})),$(this).addClass("clicked"),$("#btn-topic-dislike").addClass("disabled"))}catch(t){}}),$("#btn-topic-too-easy").on("click",function(e){e.preventDefault();try{$(this).hasClass("disabled")?(U("You already said this topic was too hard.",{type:"fail",timeout:2e3}),alert("You already said this topic was too hard.")):$(this).hasClass("clicked")?U("You already said this topic was too easy.",{type:"fail",timeout:2e3}):("undefined"!=typeof jo.topic.id&&jo.topic.id>0&&(jo.ga(jo.id+": "+jo.name,"topic-too-easy",jo.topic.id+": "+jo.topic.name),U("Thank you for your feedback.",{type:"success",timeout:2e3})),$(this).addClass("clicked"),$("#btn-topic-too-hard").addClass("disabled"))}catch(t){}}),$("#btn-topic-too-hard").on("click",function(e){e.preventDefault();try{$(this).hasClass("disabled")?U("You already said this topic was too easy.",{type:"fail",timeout:2e3}):$(this).hasClass("clicked")?U("You already said this topic was too hard.",{type:"fail",timeout:2e3}):("undefined"!=typeof jo.topic.id&&jo.topic.id>0&&(jo.ga(jo.id+": "+jo.name,"topic-too-hard",jo.topic.id+": "+jo.topic.name),U("Thank you for your feedback.",{type:"success",timeout:2e3})),$(this).addClass("clicked"),$("#btn-topic-too-easy").addClass("disabled"))}catch(t){}}),$("#btn-topic-comment").on("click",function(e){e.preventDefault();try{$(this).hasClass("disabled")?U("You have already submitted a comment on this topic.",{type:"fail",timeout:2e3}):($("#topic-feedback-text").val(""),$("#topic-feedback-instr-comment").removeClass("hide").addClass("show"),$("#topic-feedback-instr-problem").removeClass("show").addClass("hide"),$("#btn-topic-feedback-submit-comment").removeClass("hide").addClass("show"),$("#btn-topic-feedback-submit-problem").removeClass("show").addClass("hide"),$("#overlay-topic-feedback-container").removeClass("hide").addClass("show"),$("#overlay-background").removeClass("hide").addClass("show"),$("#topic-feedback-text").select())}catch(t){}}),$("#btn-topic-problem").on("click",function(e){e.preventDefault();try{$(this).hasClass("disabled")?U("You have already reported a problem on this topic.",{type:"fail",timeout:2e3}):($("#topic-feedback-text").val(""),$("#topic-feedback-instr-comment").removeClass("show").addClass("hide"),$("#topic-feedback-instr-problem").removeClass("hide").addClass("show"),$("#btn-topic-feedback-submit-comment").removeClass("show").addClass("hide"),$("#btn-topic-feedback-submit-problem").removeClass("hide").addClass("show"),$("#overlay-topic-feedback-container").removeClass("hide").addClass("show"),$("#overlay-background").removeClass("hide").addClass("show"),$("#topic-feedback-text").select())}catch(t){}}),$("#hamburger").on("click",function(e){e.preventDefault(),W()}),$("#menuContentLayer").on("click",function(e){e.preventDefault(),h()}),$(".overlay-continue-btn").on("click",function(e){e.preventDefault(),oe()}),$(".play-topic-again").on("click",function(e){e.preventDefault(),V()}),$(".process-char").on("click",function(e){e.preventDefault(),$(this).data("idx")&&ee($(this).data("idx"))}),$(".show-about-overlay").on("click",function(e){e.preventDefault(),Ie()}),$(".show-bonus").on("click",function(e){e.preventDefault(),R()}),$(".show-debug-data-overlay").on("click",function(e){e.preventDefault(),Ee()}),$(".show-game-stats-overlay").on("click",function(e){e.preventDefault(),Je()}),$(".show-general-feedback-overlay").on("click",function(e){e.preventDefault(),Qe()}),$(".show-help-overlay").on("click",function(e){e.preventDefault(),Me()}),$(".show-high-scores-overlay").on("click",function(e){e.preventDefault();var t={};"undefined"==typeof jo||$.isEmptyObject(jo)||(t.gameId=jo.getProperty("id"),t.lang=jo.getProperty("lang"),t.skillLevel=jo.getProperty("skillLevel"),t.knowledgeLevel=jo.getProperty("knowledgeLevel"),t.categoryId=jo.getProperty("category_id")),Ae(t)}),$(".show-round-stats-overlay").on("click",function(e){e.preventDefault(),He()}),$(".show-settings-overlay").on("click",function(e){e.preventDefault(),Fe()}),$(".show-tile-values-overlay").on("click",function(e){e.preventDefault(),Ge()}),$(".visit-thwords-com").on("click",function(e){e.preventDefault(),window.open("http://thwords.com"),h()})}function c(){return"undefined"==typeof jo.bonusQuestions||"undefined"==typeof jo.bonusQuestions.questions?0:jo.bonusQuestions.questions.length}function d(){n()?lt():jo.move.total>=jo.move.max&&G()}function u(){var e=new Date;e.setTime(e.getTime()-288e5),$.cookie("Woggle-play",null,{path:"/",expires:e}),$.cookie("Woggle-round",null,{path:"/",expires:e}),$.cookie("Woggle-game",null,{path:"/",expires:e})}function p(){$("#overlay-div-content-top").html(""),$("#overlay-div-content").html(""),$("#overlay-div-container").removeClass().addClass("standard").addClass("hide"),$("#overlay-background").removeClass("show").addClass("hide"),$("#overlay-background").css("opacity",vt.overlayBackgroundOpacity)}function h(){$("#container").unbind("touchmove"),$("#container").animate({marginLeft:["-1","easeOutExpo"]},{duration:700,complete:function(){$("#content").css("width","auto"),$("#menuContentLayer").css("display","none"),$("nav").css("opacity",0),$("#content").css("min-height","auto"),$("nav").css("display","none")}})}function g(){U("Loading Categories ...",{type:"loading","class":"loading-msg",clickable:!1,timeout:0});var e="http://"+$o.getApiDomain()+po.replace(/\/$/,"")+"/category/get?callback=?&rn=1&mx=3&gi="+jo.id+"&al="+jo.lang+"&sl="+jo.adjustedSkillLevel()+"&kl="+jo.adjustedKnowledgeLevel();$o.ga("API",$o.getApiDomain(),e),jo.ga(jo.id+": "+jo.name,"fetch-categories","url: "+e),e+="&"+Math.floor(1e8*Math.random()+1),$.ajax({type:"GET",url:e,async:!1,jsonpCallback:"jsonCallback1",contentType:"application/json",dataType:"jsonp",success:function(e){console.log(e);var t=pe(e);$("#game-panel-choose").html(t),$(".select-category").bind("click",function(e){e.preventDefault(),Oo(this)}),qe("choose",!0),Co.status>0&&qe("score",!1),te()},error:function(t){try{$o.ga("Error","createCategorySelectList","url: "+e+", "+JSON.stringify(t))}catch(t){}try{console.log("Error createCategorySelectList:\nurl: "+e+"\nerror: "+JSON.stringify(t))}catch(t){}confirm("Could not fetch categories. Try again?")&&($o.nextApiDomain(),g())}})}function f(){U("Loading Lessons ...",{type:"loading","class":"loading-msg",clickable:!1,timeout:0});var e="http://"+$o.getApiDomain()+po.replace(/\/$/,"")+"/lesson/get?callback=?&rn=1&mx=3&gi="+jo.id+"&al="+jo.lang+"&sl="+jo.adjustedSkillLevel()+"&kl="+jo.adjustedKnowledgeLevel();$o.ga("API",$o.getApiDomain(),e),jo.ga(jo.id+": "+jo.name,"fetch-lessons","url: "+e),e+="&"+Math.floor(1e8*Math.random()+1),$.ajax({type:"GET",url:e,async:!1,jsonpCallback:"jsonCallback2",contentType:"application/json",dataType:"jsonp",success:function(e){console.log(e);var t=he(e);$("#game-panel-choose").html(t),$(".select-subject").bind("click",function(e){e.preventDefault(),So(this)}),qe("choose",!0),Co.status>0&&qe("score",!1),te()},error:function(t){try{$o.ga("Error","createLessonSelectList","url: "+e+", "+JSON.stringify(t))}catch(t){}try{console.log("Error createLessonSelectList:\nurl: "+e+"\nerror: "+JSON.stringify(t))}catch(t){}confirm("Could not fetch lessons. Try again?")&&($o.nextApiDomain(),f())}})}function m(){U("Loading Subjects ...",{type:"loading","class":"loading-msg",clickable:!1,timeout:0});var e="http://"+$o.getApiDomain()+po.replace(/\/$/,"")+"/subject/get?callback=?rn=1&mx=3&gi="+jo.id+"&al="+jo.lang+"&sl="+jo.adjustedSkillLevel()+"&kl="+jo.adjustedKnowledgeLevel()+"&ci="+(0===jo.category.choose?0:jo.category.id);$o.ga("API",$o.getApiDomain(),e),jo.ga(jo.id+": "+jo.name,"fetch-subjects","url: "+e),e+="?"+Math.floor(1e8*Math.random()+1),$.ajax({type:"GET",url:e,async:!1,jsonpCallback:"jsonCallback3",contentType:"application/json",dataType:"jsonp",success:function(t){if(console.log(t),$.isEmptyObject(t)&&jo.category.choose>0)jo.ga("Warning","no-subjects-found-for-category","url: "+e),alert("No subjects found.\n\nPlease select another category."),g();else if($.isEmptyObject(t))confirm("No subjects found.\n\nTry again?")&&($o.nextApiDomain(),m());else{var o=ge(t);$("#game-panel-choose").html(o),$(".select-subject").bind("click",function(e){e.preventDefault(),Lo(this)}),qe("choose",!0),Co.status>0&&qe("score",!1),te()}},error:function(t){try{$o.ga("Error","createSubjectSelectList","url: "+e+", "+JSON.stringify(t))}catch(t){}try{console.log("Error createSubjectSelectList:\nurl: "+e+"\nerror: "+JSON.stringify(t))}catch(t){}confirm("Could not fetch subjects. Try again?")&&($o.nextApiDomain(),m())}})}function y(){U("Loading Topics ...",{type:"loading","class":"loading-msg",clickable:!1,timeout:0});var e="http://"+$o.getApiDomain()+po.replace(/\/$/,"")+"/topic/get?callback=?&rn=1&mx=3&gi="+jo.id+"&al="+jo.lang+"&sl="+jo.adjustedSkillLevel()+"&kl="+jo.adjustedKnowledgeLevel()+"&ci="+(0===jo.category.choose?0:jo.category.id)+"&ui="+(0===jo.subject.choose?0:jo.subject.id);$o.ga("API",$o.getApiDomain(),e),jo.ga(jo.id+": "+jo.name,"fetch-topics","url: "+e),e+="&"+Math.floor(1e8*Math.random()+1),$.ajax({type:"GET",url:e,async:!1,jsonpCallback:"jsonCallback4",contentType:"application/json",dataType:"jsonp",success:function(t){if(console.log(t),$.isEmptyObject(t)&&jo.subject.choose>0)jo.ga("Warning","no-topic-found-for-subject","url: "+e),alert("No topics found.\n\nPlease select another subject."),m();else if($.isEmptyObject(t)&&jo.subject.choose>0)jo.ga("Warning","no-topic-found-for-category","url: "+e),alert("No topics found.\n\nPlease select another category."),g();else if($.isEmptyObject(t))confirm("No topics found.\n\nTry again?")&&($o.nextApiDomain(),y());else{var o=fe(t);$("#game-panel-choose").html(o),$(".select-topic").bind("click",function(e){e.preventDefault(),Po(this)}),qe("choose",!0),Co.status>0&&qe("score",!1),te()}},error:function(t){try{$o.ga("Error","createTopicSelectList","url: "+e+", "+JSON.stringify(t))}catch(t){}try{console.log("Error createTopicSelectList:\nurl: "+e+"\nerror: "+JSON.stringify(t))}catch(t){}confirm("Could not fetch topics. Try again?")&&($o.nextApiDomain(),y())}})}function v(e){for(var t=e.slice(0).sort(),o=[],n=0;n<e.length-1;n++)t[n+1]==t[n]&&o.push(t[n]);return o.length>0?!0:!1}function b(e){e=e||{},U("Loading Thwords ...",{type:"loading","class":"loading-msg",clickable:!1,timeout:0});var t="http://"+$o.getApiDomain()+po.replace(/\/$/,"")+"/game-play/get?callback=?&gi="+jo.id+"&sl="+jo.skillLevel+"&kl="+jo.knowledgeLevel+"&ci="+(jo.getProperty("category-choose")<0?jo.getProperty("category-id"):e.category_id||0)+"&ui="+(jo.getProperty("subject-choose")<0?jo.getProperty("subject-id"):e.subject_id||0)+"&ti="+(jo.getProperty("topic-choose")<0?jo.getProperty("topic-id"):e.topic_id||0)+"&li="+(jo.getProperty("lesson-choose")<0?jo.getProperty("lesson-id"):e.lesson_id||0)+"&al="+jo.lang;$o.ga("API",$o.getApiDomain(),t),jo.ga(jo.id+": "+jo.name,"fetch-play","url: "+t),t+="&"+Math.floor(1e8*Math.random()+1),$.ajax({type:"GET",url:t,async:!1,jsonpCallback:"jsonCallback5",contentType:"application/json",dataType:"jsonp",success:function(e){U("Creating Tiles ...",{type:"loading","class":"loading-msg",clickable:!1,timeout:0}),Y(e),te()},error:function(o){try{$o.ga("Error","fetchPlay","url: "+t+", "+JSON.stringify(o))}catch(o){}try{console.log("Error fetchPlay:\nurl: "+t+"\nerror: "+JSON.stringify(o))}catch(o){}confirm("Could not fetch Thwords. Try again?")&&($o.nextApiDomain(),b(e))}})}function w(){for(var e=$o.tileFlipDelay,t=0;t<jo.thwords.tls.length;t++)for(var o=0;o<jo.thwords.tls[t].length;o++)jo.thwords.tls[t][o].f&&($o.tileFlipDelay?(uo.push([t,o]),setTimeout(function(){Pe()},e),e+=$o.tileFlipDelay):k(t,o))}function k(e,t){var n=(jo.thwords.tls[e][t].l||"??",jo.thwords.tls[e][t].v||0);$("#tile-"+e+"-"+t).addClass("solved"),jo.push("tile-flipped",[e,t],!1),et(e,t),o(n)}function C(){Co.ga(Co.id+": "+Co.name,"game-over","points: "+Co.point.count+", rounds: "+xo.count+", plays: "+jo.count),Co.setProperty("status",0),Co.setProperty("save-status",0),re(),_e("new-game",!0),K(Mustache.render(Ot,{title:"Game Over",details:""})+me(),{type:"fail"})}function x(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,o="x"==e?t:3&t|8;return o.toString(16)}),t=new Date;return t.setTime(t.getTime()+63072e6),$.cookie("Thwords-Session",e,{path:"/",expires:t}),e}function j(){return'<iframe height="440" width="420" src="'+q({e:1})+'" frameborder="0" allowfullscreen></iframe>'}function T(e){var t={};return $.each(yt,function(o,n){if(n.id==e)for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}),t}function O(e){for(var t=0;t<co.length;t++)if(e==co[t].value)return co[t].abbrev;return"?"}function S(e){for(var t=0;t<co.length;t++)if(e==co[t].value)return co[t].name;return"?"}function L(e){return"undefined"!=typeof io[e]?io[e]:!1}function P(){var e=[];return $.each(io,function(t,o){"en"!=t&&(e[e.length]={value:t,name:o})}),e}function I(e){e=e||7;var t=D(e);return T(t)}function D(e){return e=e||7,5==e?so[Math.floor(Math.random()*so.length)]:[6,8].indexOf(e)>-1?4:no[Math.floor(Math.random()*no.length)]}function _(){return 4==jo.getProperty("id")?Co.getProperty("abbrev")+": "+L(jo.getProperty("lang"))+" Thwords":Co.getProperty("abbrev")+": "+jo.getProperty("name")}function E(){return 4==jo.getProperty("id")?Co.getProperty("abbrev")+": "+L(jo.getProperty("lang")):Co.getProperty("abbrev")+": "+jo.getProperty("shortName")}function N(e){return e=e||ro,e[Math.floor(Math.random()*e.length)]}function q(e){parms=e||{},"undefined"==typeof Co||$.isEmptyObject(Co)||("undefined"!=typeof Co.lang&&Co.lang.length>0&&(e.al=Co.lang),"undefined"!=typeof Co.skillLevel&&parseInt(Co.skillLevel)>0&&(e.sl=Co.skillLevel),"undefined"!=typeof Co.knowledgeLevel&&parseInt(Co.knowledgeLevel)>0&&(e.kl=Co.knowledgeLevel),"undefined"!=typeof Co.category.choose&&parseInt(Co.category.choose)<0&&parseInt(Co.category.id)>0&&(e.cc=-1,e.ci=Co.category.id),"undefined"!=typeof Co.subject.choose&&parseInt(Co.subject.choose)<0&&parseInt(Co.subject.id)>0&&(e.uc=-1,e.ui=Co.subject.id),"undefined"!=typeof Co.topic.choose&&parseInt(Co.topic.choose)<0&&parseInt(Co.topic.id)>0&&(e.tc=-1,e.ti=Co.topic.id),"undefined"!=typeof Co.lesson.choose&&parseInt(Co.lesson.choose)<0&&parseInt(Co.lesson.id)>0&&(e.lc=-1,e.li=Co.lesson.id),ao.indexOf(Co.id)>-1&&"undefined"!=typeof wo.langs&&(e.ap=wo.langs.join("|")));var t=document.location.toString().split(/[?#]/)[0];if(t=t.replace("/next/","/play/"),!$.isEmptyObject(e)){var o="";$.each(e,function(e,t){o+="&"+e+"="+encodeURIComponent(t)}),o.length>0&&(t+=(t.indexOf("?")<0?"?":"&")+o.substr(1))}return t}function Q(e){for(var t=0;t<lo.length;t++)if(e==lo[t].value)return lo[t].abbrev;return"?"}function M(e){for(var t=0;t<lo.length;t++)if(e==lo[t].value)return lo[t].name;return"?"}function A(e){for(var t=window.location.search.substring(1),o=t.split("&"),n=0;n<o.length;n++){var s=o[n].split("=");if(s[0]==e)return decodeURIComponent(s[1])}return null}function B(e){e=e||!1;for(var t=window.location.search.substring(1),o=t.split("&"),n=[],s={},a=0;a<o.length;a++){var i=o[a].split("=");if("undefined"!=typeof i[0]&&i[0].length>0){if("ap"==i[0])var r=decodeURIComponent(i[1]).split("|");else var r=decodeURIComponent(i[1]);n[n.length]={name:i[0],value:r},s[i[0]]=r}}return e?s:n}function F(){$("#overlay-ad").removeClass("show").addClass("hide"),H()}function J(e){$("#game-panel-"+e).removeClass("show").addClass("hide")}function H(){if(1!==parseInt($o.getProperty("showAds")))return!1;var e=$o.getProperty("adUrl")+"?callback=?";e+="&"+Math.floor(1e8*Math.random()+1),$.ajax({type:"GET",url:e,async:!1,jsonpCallback:"jsonCallback6",contentType:"application/json",dataType:"jsonp",data:{},success:function(e){$("#ad-content").html(e),$("#ad-content").find("a").each(function(){$(this).on("click",function(e){return $o.ga("Ad","click",$(this).data("client")+": "+$(this).attr("href")),F(),!0})})},error:function(t){try{$o.ga("Error","loadAdOverlay","url: "+e+", "+JSON.stringify(t))}catch(t){}try{console.log("Error loadAdOverlay:\nurl: "+e+"\nerror: "+JSON.stringify(t))}catch(t){}}})}function Y(e){if(!$.isEmptyObject(e)){try{"undefined"!=typeof e.ti&&parseInt(e.ti)>0&&jo.ga(jo.id+": "+jo.name,"load-topic",e.ti+": "+("undefined"!=typeof e.tn?e.tn:"")),"undefined"!=typeof e.ui&&parseInt(e.ui)>0&&jo.ga(jo.id+": "+jo.name,"load-subject",e.ui+": "+("undefined"!=typeof e.un?e.un:"")),"undefined"!=typeof e.ci&&parseInt(e.ci)>0&&jo.ga(jo.id+": "+jo.name,"load-category",e.ci+": "+("undefined"!=typeof e.cn?e.cn:"")),"undefined"!=typeof e.li&&parseInt(e.li)>0&&jo.ga(jo.id+": "+jo.name,"load-lesson",e.li+": "+("undefined"!=typeof e.ln?e.ln:""))}catch(t){try{jo.ga(jo.id+": "+jo.name,"loadPlay",t.toString()+", data: "+JSON.stringify(e))}catch(t){}}"undefined"!=typeof e.tz&&!$.isEmptyObject(e.tz),"undefined"!=typeof e.qz&&!$.isEmptyObject(e.qz),"undefined"!=typeof e.su&&!$.isEmptyObject(e.su);var o={category:{id:jo.category.id,count:jo.category.count},lesson:{id:jo.lesson.id,count:jo.lesson.count},subject:{id:jo.subject.id,count:jo.subject.count},topic:{id:jo.topic.id,count:jo.topic.count}};for(var n in e)if(e.hasOwnProperty(n))switch(n){case"pt":jo.setProperty("point-total",0,!1,!1),jo.addToTotal("point",e[n],!0,!1);break;case"zt":jo.setProperty("thword-total",0,!1,!1),jo.addToTotal("thword",e[n],!0,!1);break;default:jo.setProperty(n,e[n],!1,!1)}o.category.id>0&&jo.category.id==o.category.id?jo.addToCount("category",1):(jo.setProperty("category-count",1),jo.category.played.indexOf(jo.category.id)<0&&jo.push("category-played",jo.category.id)),o.lesson.id>0&&jo.lesson.id==o.lesson.id?jo.addToCount("lesson",1):(jo.setProperty("lesson-count",1),jo.lesson.played.indexOf(jo.lesson.id)<0&&jo.push("lesson-played",jo.lesson.id)),o.subject.id>0&&jo.subject.id==o.subject.id?jo.addToCount("subject",1):(jo.setProperty("subject-count",1),jo.subject.played.indexOf(jo.subject.id)<0&&jo.push("subject-played",jo.subject.id)),o.topic.id>0&&jo.topic.id==o.topic.id?jo.addToCount("topic",1):(jo.setProperty("topic-count",1),jo.topic.played.indexOf(jo.topic.id)<0&&jo.push("topic-played",jo.topic.id)),Co.store(),xo.store(),jo.store()}qe("topic",!0),qe("score"),$.isEmptyObject(jo.thwords)?$.isEmptyObject(jo.quiz)?alert("No Thwords or quizzes found."):alert("QUIZ - these have not been implemented yet."):(jo.adjustedBonusOn()&&($.isEmptyObject(jo.bonusQuestions)||"undefined"==typeof jo.bonusQuestions.q||0===jo.bonusQuestions.q.length)&&jo.generateBonusQuestions(),Oe(),qe("chars"),Te(),qe("answers"),w()),Co.store(),xo.store(),jo.store()}function G(){jo.ga(jo.id+": "+jo.name,"play-lose","topic "+jo.topic.id+": "+jo.topic.name),jo.ga(jo.id+": "+jo.name,"skill"+jo.skillLevel+"-knowledge"+jo.knowledgeLevel+"-play-lose","topic "+jo.topic.id+": "+jo.topic.name),$(".thw-rack").not(".solved-thword").addClass("wrong-thword"),ie();for(var e=0;e<jo.thwords.ans.length;e++)$("#answer-"+e+" > .aux2").removeClass("hide").addClass("show");if(J("chars"),jo.bonus.on>0&&c()>0&&jo.save.status<0){if(jo.setProperty("status",0),jo.setProperty("save-status",1,!0),jo.addToTotal("save",1,!0),c()>1){$("#btn-show-bonus").html("BONUS QUESTIONS");var t="Game Over",o="However, you can continue your game if you answer all of the following bonus questions correctly."}else{$("#btn-show-bonus").html("BONUS QUESTION");var t="Game Over",o="However, you can continue your game if you answer the following bonus question correctly."}var n=Mustache.render(Ot,{title:t,details:o});K(n,{type:"fail",position:"top"}),_e("show-bonus",!0)}else qe("feedback",!1),xe();qe("start")}function z(e,t){t=t||!1;var o=jo.thwords.chs[e].m.length;if(!t)for(var n=0;n<jo.thwords.chs[e].m.length;n++){var s=jo.thwords.chs[e].m[n][0],a=jo.thwords.chs[e].m[n][1];jo.thwords.tls[s][a].f&&o--}return o}function R(){jo.addToTotal("bonus",1,!0);var e=X();if(e){switch(e.type){case"mc":case"tf":case"yn":var t=Mustache.render(Et,e);break;case"tx":var o=e.answer.indexOf(" ");if(0>o)e.prefix="";else{var n=e.answer.slice(0,o+1);jo.thwords.px.indexOf(n)>-1&&jo.adjustedSkillLevel()<3?(e.prefix=n,e.answer=e.answer.slice(o+1)):e.prefix=""}var t=Mustache.render(Nt,e);break;default:alert("Invalid question type")}$("#game-panel-bonus").html(t),$.each($(".question-answer"),function(){$(this).removeClass("hide").addClass("show")}),$(".question-answer").bind("click",function(e){$(this).hasClass("done")||(e.preventDefault(),To(this))}),$("#submit-question-answer").on("click",function(e){e.preventDefault(),Xe(this)}),$("#question-response").on("keypress",function(e){13==e.which&&(e.preventDefault(),Xe($("#submit-question-answer")))}),$(".next-question").on("click",function(e){e.preventDefault(),R()}),"tx"==e.type&&$("#question-response").focus(),qe("score",!0),qe("bonus",!1)}else Ue()}function W(){$("nav").css("display","block"),$("#content").css("min-height",$(window).height()),$("nav").css("opacity",1);var e=$("#content").width();$("#content").css("width",e),$("#menuContentLayer").css("display","block"),$("#container").bind("touchmove",function(e){e.preventDefault()}),$("#container").animate({marginLeft:["30%","easeOutExpo"]},{duration:700})}function U(e,t){$("#overlay-btn-container").hasClass("show")&&te(),t=t||{};var o=t.type||"standard",n=t["class"]||"",s=t.data||{},a=t.clickable||!0,i="undefined"!=typeof t.timeout?t.timeout:$o.overlayButtonDelay,r="undefined"!=typeof t.opacity?t.opacity:vt.overlayBackgroundOpacity,l=document.createElement("button");$(l).attr("id","overlay-btn"),$(l).addClass("btn").addClass("thw-btn").addClass("overlay-btn").addClass(o).addClass("show"),n&&$(l).addClass(n),$(l).html(e),$.each(s,function(e,t){$(l).attr("data-"+e,t)}),a&&$(l).on("click",function(e){te()}),r!==!1&&($("#overlay-background").css("opacity",r),$("#overlay-background").removeClass("hide").addClass("show")),$("#overlay-btn-container").html("").append(l).removeClass("hide").addClass("show"),i&&(oo=setTimeout(function(){te()},i))}function K(e,t){t=t||{},$o=$o||{},vt=vt||{};var o=t.type||"standard",n="undefined"!=typeof t.timeout?t.timeout:$o.overlayDivDelay||0,s=t["class"]||"",a=t.data||{},i=t.label||"Continue",r=t.position||"bottom",l=t.bindAction||!1,c=t.hideNav||!1,d="undefined"!=typeof t.opacity?t.opacity:vt.overlayBackgroundOpacity||.5;if(c&&$("#overlay-div-nav").addClass("hide"),$("#overlay-div-content-top").html(""),$("#overlay-div-content").html(""),"top"==r?$("#overlay-div-content-top").html(e):$("#overlay-div-content").html(e),$("#overlay-continue-btn").text(i),$("#overlay-continue-btn").removeClass().addClass("btn").addClass("thw-btn").addClass("overlay-continue-btn").addClass("show"),s&&$("#overlay-continue-btn").addClass(s),$.each(a,function(e,t){$("#overlay-continue-btn").attr("data-"+e,t)}),d!==!1&&($("#overlay-background").css("opacity",d),$("#overlay-background").removeClass("hide").addClass("show")),$("#overlay-div-container").removeClass().addClass(o).addClass("show"),s&&$("#overlay-div-container").addClass(s),l)switch(l){}n&&(to=setTimeout(function(){oe()},n))}function V(){jo.ga(jo.id+": "+jo.name,"topic-repeat","topic "+jo.topic.id+": "+jo.topic.name),jo.setProperties({status:1,save_status:0}),jo.setProperty("count",jo.count+1),$(".strike-xs").html(""),b({topic_id:jo.topic.id})}function X(){try{if(c()<0)return!1;if("undefined"!=typeof jo.bonusQuestions||"undefined"!=typeof jo.bonusQuestions.questions){if("undefined"==typeof jo.bonusQuestions.idx)return jo.bonusQuestions.idx=99999,!1;if("undefined"!=typeof jo.bonusQuestions.questions[jo.bonusQuestions.idx]&&jo.bonusQuestions.idx<=jo.bonus.total){var e={idx:jo.bonusQuestions.idx,title:jo.bonusQuestions.title?jo.bonusQuestions.title:jo.bonusQuestions.questions.length>0?"Bonus Questions":"Bonus Question",instructions:jo.bonusQuestions.label?jo.bonusQuestions.label:"Select the answer that best matches."};if(e.type="undefined"!=typeof jo.bonusQuestions.questions[jo.bonusQuestions.idx].t?jo.bonusQuestions.questions[jo.bonusQuestions.idx].t:!1,e.question="undefined"!=typeof jo.bonusQuestions.questions[jo.bonusQuestions.idx].q?jo.bonusQuestions.questions[jo.bonusQuestions.idx].q:"",e.answer="undefined"!=typeof jo.bonusQuestions.questions[jo.bonusQuestions.idx].a?jo.bonusQuestions.questions[jo.bonusQuestions.idx].a:"",e.points="undefined"!=typeof jo.bonusQuestions.questions[jo.bonusQuestions.idx].p?jo.bonusQuestions.questions[jo.bonusQuestions.idx].p:1,e.options=[],"undefined"!=typeof jo.bonusQuestions.questions[jo.bonusQuestions.idx].o)for(var t=0;t<jo.bonusQuestions.questions[jo.bonusQuestions.idx].o.length;t++)e.options[e.options.length]={text:jo.bonusQuestions.questions[jo.bonusQuestions.idx].o[t],option:t};return jo.bonusQuestions.idx=jo.bonusQuestions.idx+1,e}return jo.bonus.idx=99999,!1}return!1}catch(o){return console.log(o),$o.ga("Error","popNextBonusQuestion",o.toString()),!1}}function Z(e){if("undefined"==typeof e.idx||"undefined"==typeof e.option||"undefined"==typeof e.correct)return jo.ga("Error","bonus-processing-problem",JSON.stringify(e)),alert("Can't process bonus."),!1;switch(idx=e.idx||0,option=e.option||0,correct=e.correct||0,jo.bonusQuestions.questions[idx].t){case"tx":break;case"mc":case"tf":case"yn":default:var t=option==correct?!0:!1;t?$("#question-answer-"+idx+"-"+correct).addClass("correct"):($("#question-answer-"+idx+"-"+option).addClass("wrong"),$("#question-answer-"+idx+"-"+correct).addClass("correct"))}if($.each($(".question-answer"),function(){$(this).addClass("done")}),$("#question-title").addClass("hide"),$("#question-instructions").addClass("hide"),jo.bonusQuestions.idx<jo.bonusQuestions.questions.length)_e("next-question",!0);else if($("#btn-next-question").removeClass("show").addClass("hide"),jo.bonus.count==jo.bonus.total){if(jo.ga(jo.id+": "+jo.name,"bonus-win","topic "+jo.topic.id+": "+jo.topic.name),jo.ga(jo.id+": "+jo.name,"skill"+jo.skillLevel+"-knowledge"+jo.knowledgeLevel+"-bonus-win","topic "+jo.topic.id+": "+jo.topic.name),jo.save.status>0){jo.ga(jo.id+": "+jo.name,"save-win","topic "+jo.topic.id+": "+jo.topic.name),jo.ga(jo.id+": "+jo.name,"skill"+jo.skillLevel+"-knowledge"+jo.knowledgeLevel+"-save-win","topic "+jo.topic.id+": "+jo.topic.name),jo.addToCount("save",1,!0),jo.setProperty("save-status",-1,!0);var o=Mustache.render(St,{});K(o,{msgType:"success","class":"show-start-panel",timeout:0,position:"top"})}_e("next-round",!0),Be()}else jo.ga(jo.id+": "+jo.name,"bonus-lose","topic "+jo.topic.id+": "+jo.topic.name),jo.ga(jo.id+": "+jo.name,"skill"+jo.skillLevel+"-knowledge"+jo.knowledgeLevel+"-bonus-lose","topic "+jo.topic.id+": "+jo.topic.name),jo.save.status>0?(jo.ga(jo.id+": "+jo.name,"save-lose","topic "+jo.topic.id+": "+jo.topic.name),jo.ga(jo.id+": "+jo.name,"skill"+jo.skillLevel+"-knowledge"+jo.knowledgeLevel+"-save-lose","topic "+jo.topic.id+": "+jo.topic.name),jo.setProperty("save-status",0,!0),xe()):(_e("next-round",!0),Be());qe("start"),qe("feedback",!1)}function ee(e){if("undefined"==typeof e)return!1;gt=!0,jo.push("char-played",e,!1);
    var n=$o.tileFlipDelay;if(z(e)>0){t();for(var s=0;s<jo.thwords.chs[e].m.length;s++)$o.tileFlipDelay?(uo.push([jo.thwords.chs[e].m[s][0],jo.thwords.chs[e].m[s][1]]),setTimeout(function(){Pe()},n),n+=$o.tileFlipDelay):k(jo.thwords.chs[e].m[s][0],jo.thwords.chs[e].m[s][1])}else{Ve();var a=ct(jo.thwords.chs[e].v);o(a)}0==uo.length&&jo.status>0&&d(),gt=!1}function te(){clearTimeout(oo),$("#overlay-btn-container").removeClass("show").addClass("hide"),$("#overlay-background").removeClass("show").addClass("hide"),$("#overlay-background").css("opacity",vt.overlayBackgroundOpacity);var e=$("#overlay-btn");$(e).hasClass("process-char")&&"undefined"!=typeof $(e).attr("data-idx")?ee($(e).data("idx")):$(e).hasClass("process-bonus")&&"undefined"!=typeof $(e).attr("data-correct")&&Z({idx:$(e).data("idx"),option:$(e).data("option"),correct:$(e).data("correct")})}function oe(){clearTimeout(to),$("#overlay-background").removeClass("show").addClass("hide"),$("#overlay-div-container").removeClass("show").addClass("hide"),$("#overlay-div-nav").removeClass("hide"),$("#overlay-continue-btn").hasClass("process-char")&&"undefined"!=typeof $("#overlay-continue").attr("data-idx")?ee($("#overlay-continue-btn").data("idx")):$("#overlay-continue-btn").hasClass("next-round")?Ue():$("#overlay-continue-btn").hasClass("show-start-panel")&&qe("start"),p()}function ne(){var e=B();if(e.length>0){$o.validationOff(),Co.validationOff(),xo.validationOff(),jo.validationOff();for(var t=0;t<e.length;t++)$o.setProperty(e[t].name,e[t].value,!0),jo.setProperty(e[t].name,e[t].value,!0);$o.validationOn(),Co.validationOn(),xo.validationOn(),jo.validationOn()}}function se(){h(),confirm("If you quit you will lose your current game.\n\nIf you want to keep your game use the Save and Exit option. \n\nAre you sure you want to quit?")&&(jo.ga(jo.id+": "+jo.name,"game-quit","points: "+Co.point.total+", rounds: "+xo.count+", plays: "+jo.count),re(),jo.setProperty("status",0,!0),jo.setProperty("save-status",0,!0),u(),document.location.href="/play")}function ae(e,t){var o=jo.thwords.tls[e][t].l||"??";jo.thwords.tls[e][t].v||0;$("#tile-"+e+"-"+t).first().html(o)}function ie(){for(var e=($o.tileFlipDelay,0);e<jo.thwords.tls.length;e++){for(var t=0;t<jo.thwords.tls[e].length;t++)0==jo.thwords.tls[e][t].s&&ae(e,t);s(e,!0)}}function re(){try{var e={gi:Co.id,gg:Co.slug,gr:Co.random,sa:Co.status,cc:Co.category.choose,ci:Co.category.choose<0?Co.category.id:0,uc:Co.subject.choose,ui:Co.subject.choose<0?Co.subject.id:0,tc:Co.topic.choose,ti:Co.lesson.choose<0?Co.topic.id:0,lc:Co.lesson.choose,li:Co.lesson.choose<0?Co.lesson.id:0,pb:Co.bonus.on,rd:jo.count,al:Co.lang,sl:Co.skillLevel,kl:Co.knowledgeLevel,zt:Co.thword.total,zc:Co.thword.count,zp:Co.thword.percent,mm:Co.move.max,mt:Co.move.total,mc:Co.move.count,mp:Co.move.percent,pt:Co.point.total,pc:Co.point.count,pp:Co.point.percent,bt:Co.bonus.total,bc:Co.bonus.count,bp:Co.bonus.percent,ps:Co.save.on,st:Co.save.total,sc:Co.save.count,sp:Co.save.percent,hc:Co.hitStreak.current,hl:Co.hitStreak["long"],uid:wo.id,uun:wo.username,una:wo.name,uem:wo.email,sid:wo.sessionId,gid:ko.id,gna:ko.name};try{jo.ga(jo.id+": "+jo.name,"record-stats","data: "+JSON.stringify(e))}catch(t){}statsDomain=$o.getStatsDomain();var o="http://"+statsDomain+po.replace(/\/$/,"")+"/results/save?callback=?";$o.ga("API",statsDomain,o),$.ajax({type:"POST",url:o,async:!1,jsonpCallback:"jsonCallback7",contentType:"application/json",dataType:"jsonp",data:e,success:function(e){console.log("Game successfully recorded.")},error:function(t){try{$o.ga("Error","recordFinalStats","url: "+o+", "+JSON.stringify(t)+", data: "+JSON.stringify(e))}catch(t){}try{console.log("Error recordFinalStats:\ndata: "+JSON.stringify(e)+"\nurl: "+o+"\nerror: "+JSON.stringify(t))}catch(t){}}})}catch(t){console.log(t),$o.ga("Error","recordFinalStats",t.toString())}}function le(){Co.point.count<0?$(".game-point-count").each(function(){$(this).addClass("negative")}):$(".game-point-count").each(function(){$(this).removeClass("negative")}),$("#moves-left").removeClass("txt-fail").removeClass("txt-danger"),parseInt(jo.move.remaining)<2?$("#moves-left").addClass("txt-fail"):parseInt(jo.move.remaining)<3&&$("#moves-left").addClass("txt-danger"),$(".round-moves-left-text").text(1==parseInt(jo.move.remaining)?"move left":"moves left");var e="";for(i=0;i<jo.move.strikes;i++)e+="X";$(".strike-xs").html(e)}function ce(){var e={version:ft,copyright:mt};return Mustache.render(bt,e)}function de(){if($.isEmptyObject(jo)||$.isEmptyObject(jo.thwords)||"undefined"==typeof jo.thwords.ans)alert("Thword answers not found.");else for(var e={answers:[]},t=0;t<jo.thwords.ans.length;t++)e.answers[e.answers.length]={idx:t,answer:jo.thwords.ans[t],aux1:jo.thwords.aux1[t],aux2:jo.thwords.aux2[t],tileRack:we(t)};return Mustache.render($t,e)}function ue(){var e={chars:[]};return $.isEmptyObject(jo)||$.isEmptyObject(jo.thwords.chs)||$.each(jo.thwords.chs,function(t,o){e.chars[e.chars.length]={idx:t,label:o.l,"class":1==o.f?" chosen":""},1==o.f&&jo.push("char-played",t,!1)}),Mustache.render(wt,e)}function pe(e){var t=0,o={categories:e,lang:jo.lang,idx:function(){return t++}};return Mustache.render(kt,o)}function he(e){var t=0,o={lessons:e,lang:jo.lang,idx:function(){return t++}};return Mustache.render(Ct,o)}function ge(e){var t=0,o={subjects:e,lang:jo.lang,idx:function(){return t++}};return Mustache.render(xt,o)}function fe(e){var t=0,o={topics:e,lang:jo.lang,idx:function(){return t++}};return Mustache.render(jt,o)}function me(){var e={rounds:xo.count,plays:jo.count,thword:{total:Co.thword.total,count:Co.thword.count,percent:0!=Co.thword.total?parseFloat(Co.thword.percent).toFixed(2):""},move:{total:Co.move.total,count:Co.move.count,percent:0!=Co.move.total?parseFloat(Co.move.percent).toFixed(2):"",strikes:Co.move.strikes},point:{total:Co.point.total,count:Co.point.count,percent:0!=Co.point.percent?parseFloat(Co.point.percent).toFixed(2):""},hitStreak:{"long":Co.hitStreak["long"],current:Co.hitStreak.current},bonus:{total:Co.bonus.total,count:Co.bonus.count,percent:0!=Co.bonus.total?parseFloat(Co.bonus.percent).toFixed(2):""},save:{total:Co.save.total,count:Co.save.count,percent:0!=Co.save.total?parseFloat(Co.save.percent).toFixed(2):""}};return Mustache.render(Lt,e)}function ye(){return Mustache.render(Pt,{})}function ve(){return Mustache.render(It,{})}function be(){var e={plays:jo.count,thword:{total:jo.thword.total,count:jo.thword.count,percent:0!=jo.thword.total?parseFloat(jo.thword.percent).toFixed(2):""},move:{total:jo.move.total,count:jo.move.count,percent:0!=jo.move.total?parseFloat(jo.move.percent).toFixed(2):"",strikes:jo.move.strikes,remaining:jo.move.remaining},point:{total:jo.point.total,count:jo.point.count,percent:0!=jo.point.total?parseFloat(jo.point.percent).toFixed(2):""},hitStreak:{"long":jo.hitStreak["long"],current:jo.hitStreak.current},bonus:{total:jo.bonus.total,count:jo.bonus.count,percent:0!=jo.bonus.total?parseFloat(jo.bonus.percent).toFixed(2):""},save:{total:jo.save.total,count:jo.save.count,percent:0!=jo.save.total?parseFloat(jo.save.percent).toFixed(2):""}};return Mustache.render(qt,e)}function $e(){return Mustache.render(Qt,{skillLevelOptions:lo,knowledgeLevelOptions:co,settings:$o,game:Co,user:wo,skillLevel:M(jo.skillLevel),knowledgeLevel:S(jo.knowledgeLevel),chooseCategory:Co.category.choose>0?"Yes":"No",chooseSubject:Co.subject.choose>0?"Yes":"No",chooseTopic:Co.topic.choose>0?"Yes":"No",chooseLesson:Co.lesson.choose>0?"Yes":"No",bonusOnOptions:Co.bonus.on>0?"Yes":"No"})}function we(e){for(var t=e%2?"odd-row":"even-row",o={idx:e,"class":t,tiles:[]},n=0;n<jo.thwords.tls[e].length;n++)o.tiles[o.tiles.length]={pos:n,label:jo.thwords.tls[e][n].l};return Mustache.render(At,o)}function ke(){var e={options:[]};return $.each(io,function(t,o){e.options[e.options.length]={name:t,value:o}}),Mustache.render(Bt,e)}function Ce(){$("#btn-topic-like").removeClass("clicked").removeClass("disabled"),$("#btn-topic-dislike").removeClass("clicked").removeClass("disabled"),$("#btn-topic-too-easy").removeClass("clicked").removeClass("disabled"),$("#btn-topic-too-hard").removeClass("clicked").removeClass("disabled"),$("#btn-topic-comment").removeClass("clicked").removeClass("disabled"),$("#btn-topic-problem").removeClass("clicked").removeClass("disabled")}function xe(){Co.ga(xo.id+": "+xo.name,"round-over","points: "+xo.point.count+", plays: "+jo.count),xo.setProperty("status",0),xo.setProperty("save-status",0),C()}function je(){window.onbeforeunload=function(){},h(),jo.ga(jo.id+": "+jo.name,"game-exit","points: "+Co.point.total+", rounds: "+xo.count+", plays: "+jo.count),document.location.href="/play"}function Te(){if($.isEmptyObject(jo)||"undefined"==typeof jo.thwords.ans){try{jo.ga(jo.id+": "+jo.name,"thword-answers-not-found","undefined"!=typeof jo.thwords?JSON.stringify(jo.thwords):"url"+document.location.href)}catch(e){}alert("No answers found.")}else{var t=de();$("#game-panel-answers").html($.parseHTML(t))}}function Oe(){var e=ue();$("#game-panel-chars").html(e),$(".char").bind("click",function(e){return e.preventDefault(),gt||uo.length>0?!1:void Io(this)})}function Se(){var e=document.location.toString().split(/[?#]/)[0];"/"===e.slice(-1)&&(e=e.substring(0,e.length-1)),$(".next-round-link").attr("href",e.toString().replace("/play/","/next/")+"?"+Math.floor(1e8*Math.random()+1))}function Le(){if(xo.random){var e=I(xo.id);4!=e.id||!xo.random&&"en"!=jo.lang?e.lang="en":e.lang=N(jo.langs.length?jo.langs:ro),jo.setProperties(e,!1),$(".game-name").html(_()),$(".game-shortName").html(E())}}function Pe(){var e=uo.shift();k(e[0],e[1]),0==uo.length&&d()}function Ie(){ga("send","event","Global","panel-view","About"),h(),K(ce(),{type:"standard"})}function De(){try{$("#ad-content").length&&($("#ad-content").html().replace(/^\s+|\s+$/gm,"").length||H())}catch(e){try{$o.ga("Error","showAdOverlay",JSON.stringify(e))}catch(e){}try{console.log("Error showAdOverlay: "+JSON.stringify(e))}catch(e){}}$("#overlay-ad").removeClass("hide").addClass("show")}function _e(e,t){t&&$(".btn").removeClass("show").addClass("hide"),$("#btn-"+e).removeClass("hide").addClass("show")}function Ee(){h(),K($("#debug-data").html(),{type:"standard"})}function Ne(){$(".in-game-only").each(function(){$(this).removeClass("hide").addClass("show")})}function qe(e,t){t=t||!1,t&&$(".game-panel").each(function(){$(this).removeClass("show").addClass("hide")}),$("#game-panel-"+e).removeClass("hide").addClass("show"),dt()&&($("#game-panel-stats").removeClass("hide").addClass("show"),$("#game-panel-debug").removeClass("hide").addClass("show"))}function Qe(){ga("send","event","Global","panel-view","Feedback"),h(),K(ye(),{type:"standard",label:"Cancel"}),$("#btn-general-feedback-cancel").on("click",function(e){e.preventDefault(),p()}),$("#btn-general-feedback-submit").on("click",function(e){e.preventDefault(),$("#general-feedback-text").val().length>0&&$o.ga("Feedback",$("#general-feedback-subject").val(),$("#general-feedback-text").val()),p()})}function Me(){ga("send","event","Global","panel-view","Help"),h(),K(ve(),{type:"standard"})}function Ae(e){ga("send","event","Global","panel-view","High Scores"),e=e||{},e.gameId="undefined"!=typeof e.gameId?e.gameId:Co.id,e.lang="undefined"!=typeof e.lang?e.lang:Co.lang?Co.lang:"en",e.knowledgeLevel="undefined"!=typeof e.knowledgeLevel?e.knowledgeLevel:Co.knowledgeLevel,e.skillLevel="undefined"!=typeof e.skillLevel?e.skillLevel:jo.skillLevel,e.categoryId="undefined"!=typeof e.categoryId?e.categoryId:0,e.group="undefined"!=typeof e.group?e.group:ko.id,h(),K(Mustache.render(_t,{}),{type:"standard"});var t="";e.gameId&&(t+="&gi="+e.gameId),e.knowledgeLevel&&(t+="&kl="+e.knowledgeLevel),e.skillLevel&&(t+="&sl="+e.skillLevel),e.lang&&(t+="&al="+e.lang),"undefined"!=typeof e.categoryId&&(t+="&ci="+e.categoryId),e.group&&(t+="&grp="+e.group),t.replace(/^&/,"");var o=$o.getStatsDomain(),n="http://"+o+po.replace(/\/$/,"")+"/high-scores/get?callback=?"+t;$o.ga("API",o,n),jo.ga(jo.id+": "+jo.name,"high-scores-get","url: "+n),n+="&"+Math.floor(1e8*Math.random()+1),$.ajax({type:"GET",url:n,async:!1,jsonpCallback:"jsonCallback8",contentType:"application/json",dataType:"jsonp",success:function(t){if($.isEmptyObject(t))var o="<h2>No scores found.</h2>";else{var n=[];$.each(t,function(e,t){t.tp=t.tp?parseFloat(t.tp).toFixed(2):"",t.mp=t.mp?parseFloat(t.mp).toFixed(2):"",t.pp=t.pp?parseFloat(t.pp).toFixed(2):"",t.bp=t.bp?parseFloat(t.bp).toFixed(2):null,t.sp=t.sp?parseFloat(t.sp).toFixed(2):null,t.sla=Q(t.sl),t.kla=O(t.kl),t.tca=t.tc>0?"Y":"N",t.pba=t.pb>0?"Y":"N",n[n.length]=t})}var o=Mustache.render(Dt,{scores:n});K(o,{type:"standard"}),$("#high-score-game").val(e.gameId+"-"+e.lang+"-"+e.categoryId),$("#high-score-skill-level").val(e.skillLevel),$("#high-score-game").on("change",function(e){var t=$("#high-score-game").val().split("-"),o={gameId:parseInt(t[0]),lang:t[1],skillLevel:parseInt($("#high-score-skill-level").val()),categoryId:t[2]};Ae(o)}),$("#high-score-skill-level").on("change",function(e){var t=$("#high-score-game").val().split("-"),o={gameId:parseInt(t[0]),lang:t[1],skillLevel:parseInt($("#high-score-skill-level").val()),categoryId:t[2]};Ae(o)})},error:function(e){try{$o.ga("Error","fetchHighScores","url: "+n+", "+JSON.stringify(e))}catch(e){}try{console.log("Error fetchHighScores:\nurl: "+n+"\nerror: "+JSON.stringify(e))}catch(e){}K("<p>There was a problem retrieving the high scores.</p><p>Try again later</p>",{type:"standard"})}})}function Be(){jo.topic.choose&&jo.topic.count<jo.topic.max&&_e("play-topic-again")}function Fe(){ga("send","event","Global","panel-view","Settings"),h(),K($e(),{hideNav:!0,type:"standard"}),$("#save-settings").on("click",function(e){try{jo.ga("Settings","save",""),wo.name=$("#settings-user-name").val(),wo.store()}catch(t){}oe()}),$("#cancel-settings").on("click",function(e){oe()})}function Je(){ga("send","event","Global","panel-view","Game Stats"),h(),K(me(),{type:"standard"})}function He(){ga("send","event","Global","panel-view","Round Stats"),h(),K(be(),{type:"standard"})}function Ye(){var e=Mustache.render(Mt,{user:wo,skillLevelOptions:lo,knowledgeLevelOptions:co,chooseCategoryOptions:[{value:1,name:"Yes"},{value:0,name:"No"}],chooseSubjectOptions:[{value:1,name:"Yes"},{value:0,name:"No"}],chooseTopicOptions:[{value:1,name:"Yes"},{value:0,name:"No"}],chooseLessonOptions:[{value:1,name:"Yes"},{value:0,name:"No"}],bonusOnOptions:[{value:1,name:"Yes"},{value:0,name:"No"}],langOptions:P()});if($("#start-game-settings").html(e),ao.indexOf(Co.id)<0)$("#start-settings-langs").remove();else if("undefined"!==wo.langs&&wo.langs.constructor===Array)for(var t=0;t<wo.langs.length;t++)$("#start-langs option[value="+wo.langs[t]+"]").attr("selected",!0);if($("#start-skill-level").val(Co.skillLevel),$("#start-knowledge-level").val(Co.knowledgeLevel),$("#start-settings-knowledge-level").remove(),Co.category.choose<=0&&$("#start-settings-category").remove(),$("#start-settings-category").remove(),Co.subject.choose<=0&&$("#start-settings-subject").remove(),$("#start-settings-subject").remove(),Co.topic.choose<=0&&$("#start-settings-topic").remove(),$("#start-settings-topic").remove(),Co.lesson.choose<=0&&$("#start-settings-lesson").remove(),$("#start-settings-lesson").remove(),Co.bonus.on>0?$("#start-bonus-on").val(Co.bonus.on):$("#start-settings-bonus-on").remove(),$("#start-settings-bonus-on").remove(),!$.isEmptyObject(Yt)&&"undefined"!=typeof Yt.s&&parseInt(Yt.s)>0){if("undefined"!=typeof Yt.la){var o=!1;$.each($(".lang-btn"),function(){"undefined"!==$(this).data("lang")&&($(this).data("lang")==Co.lang?($(this).removeClass("hide").addClass("show"),o=!0):$(this).removeClass("show").addClass("hide"))}),o?$.each($(".lang-explanation-text"),function(){$(this).removeClass("show").addClass("hide")}):$.each($(".lang-btn"),function(){"undefined"!==$(this).data("lang")&&$(this).removeClass("hide").addClass("show")})}if("undefined"!=typeof Yt.ap&&Yt.ap.length>0){for(var n=[],t=0;t<Yt.ap.length;t++){var s=L(Yt.ap[t]);s!==!1&&(n[n.length]=L(Yt.ap[t]))}n.length>1&&$("#start-settings-langs").html('<p class="label">Languages</p><p style="margin-bottom: 16px;">'+n.join(", ")+"</p>")}"undefined"!=typeof Yt.gs&&$("#start-settings-skillLevel").html('<p class="label">Skill Level: '+M(Co.skillLevel)+"</p>"),"undefined"!=typeof Yt.gk&&$("#start-settings-knowledgeLevel").html('<p class="label">Knowledge Level: '+S(Co.knowledgeLevel)+"</p>"),"undefined"!=typeof Yt.cc&&$("#start-settings-category").html('<p class="label">Category: '+(Co.category.choose>0?"Yes":"No")+"</p>"),"undefined"!=typeof Yt.uc&&$("#start-settings-subject").html('<p class="label">Subject: '+(Co.subject.choose>0?"Yes":"No")+"</p>"),"undefined"!=typeof Yt.tc&&$("#start-settings-topic").html('<p class="label">Topic: '+(Co.topic.choose>0?"Yes":"No")+"</p>"),"undefined"!=typeof Yt.lc&&$("#start-settings-lesson").html('<p class="label">Lesson: '+(Co.lesson.choose>0?"Yes":"No")+"</p>"),"undefined"!=typeof Yt.pb&&$("#start-settings-bonus-on").html('<p class="label">Bonus Questions: '+(Co.bonus.om>0?"Yes":"No")+"</p>")}}function Ge(){try{jo.ga(jo.id+": "+jo.name,"panel-view","Tile Values")}catch(e){}h(),K(ke(),{type:"standard"}),$("#tile-values-lang").val("undefined"!=typeof jo?jo.getProperty("lang"):Xt),$("#tile-values-lang").on("change",function(){ze($(this).val())}),ze("undefined"!=typeof jo?jo.getProperty("lang"):Xt)}function ze(e){$("#tile-value-table-container").html(Mustache.render(_t,{}));var t="http://"+$o.getApiDomain()+po.replace(/\/$/,"")+"/tiles/get?&al="+e;$o.ga("API",$o.getApiDomain(),t),$.ajax({type:"GET",url:t,async:!1,jsonpCallback:"jsonCallback9",contentType:"application/json",dataType:"jsonp",success:function(e){console.log(e);var t={tiles:[]};$.each(e.values,function(e,o){t.tiles[t.tiles.length]={label:" "===e?"<i>blank</i>":e.toLowerCase(),right:o,wrong:ct(o)}}),$("#tile-value-table-container").html(Mustache.render(Ft,t))},error:function(e){try{$o.ga("Error","loadTileValuesTable","url: "+t+", "+JSON.stringify(e))}catch(e){}try{console.log("Error loadTileValuesTable:\nurl: "+t+"\nerror: "+JSON.stringify(e))}catch(e){}confirm("Could not fetch tile values. Try again?")&&($o.nextApiDomain(),Ge())}})}function Re(e){for(var t,o,n=e.length;n;t=Math.floor(Math.random()*n),o=e[--n],e[n]=e[t],e[t]=o);return e}function We(){Co.ga(Co.id+": "+Co.name,"game-start","user: "+wo.name),jo.setProperties({status:0,save_status:0}),Co.setProperties({status:1},!1),Co.setProperty("count",Co.count+1),Co.ga(Co.id+": "+Co.name,"game-count",Co.count),Co.ga(Co.id+": "+Co.name,"game-count-"+Co.skillLevel+"-knowledge-"+Co.knowledgeLevel,Co.count),qe("start",!0),Ke()}function Ue(){$(".strike-xs").html(""),jo.setProperties({status:1,save_status:0}),jo.setProperty("count",jo.count+1),Le(),jo.ga(jo.id+": "+jo.name,"play-start","user: "+wo.name),jo.ga(jo.id+": "+jo.name,"play-count",jo.count),jo.ga(jo.id+": "+jo.name,"play-count-"+jo.skillLevel+"-knowledge-"+jo.knowledgeLevel,jo.count),jo.adjustedChooseCategory()>0?g():jo.adjustedChooseSubject()>0?m():jo.adjustedChooseTopic()>0?y():jo.adjustedChooseLesson()>0?f():b({})}function Ke(){xo.ga(xo.id+": "+xo.name,"round-start","user: "+wo.name),xo.setProperties({status:1,save_status:0}),xo.setProperty("count",xo.count+1),xo.ga(xo.id+": "+xo.name,"round-count",xo.count),xo.ga(xo.id+": "+xo.name,"round-count-"+xo.skillLevel+"-knowledge-"+xo.knowledgeLevel,xo.count),Ue()}function Ve(){jo.addToTotal("move",1),jo.setProperty("move-strikes",jo.move.strikes+1,!0),jo.setProperty("move-remaining",jo.move.max-jo.move.total),jo.store(),jo.setProperty("hitStreak-current",0,!0),le()}function Xe(e){if($("#question-response").length){var t=parseInt($(e).data("idx")),o=parseInt($(e).data("option")),n=Ze($("#question-response-prefix").text()+$("#question-response").val(),jo.bonusQuestions.questions[t].a,!0),s=jo.bonusQuestions.questions[t].p;$("#question-response").attr("disabled","disabled"),n?($("#question-response").addClass("success"),$("#question-response").html(jo.bonusQuestions.questions[t].a),U("Correct",{type:"success","class":"process-bonus",data:{idx:t,option:o,correct:n,points:s},timeout:$o.overlayButtonDelay})):($("#question-response").addClass("fail"),$("#text-question-answer").html("Answer: "+jo.bonusQuestions.questions[t].a).removeClass("hide").addClass("show"),U(Mustache.render(Jt,{correctAnswer:jo.bonusQuestions.questions[t].a}),{type:"error","class":"process-bonus",data:{idx:t,option:o,correct:n,points:s},timeout:5e3}))}else{alert("question-response field not found.");try{ga.play("Error","bonus-input-missing","question-response input text field not found. : "+JSON.stringify(jo.bonusQuestions))}catch(a){}}}function Ze(t,o,n){var s=t,a=o;return n="undefined"!=typeof n?n:!1,s=s.trim(),a=a.trim(),s=s.toLowerCase(),a=a.toLowerCase(),n&&(s=e(s),a=e(a)),0===s.localeCompare(a)?1:0}function et(e,t,o){o=o||!0,jo.thwords.tls[e][t].s=o?1:0}function tt(){dt()&&($("#game-panel-debug").css("background-color","#e8e8e8").css("color","#000").css("border","solid 1px #000").css("padding","12px"),$("#game-panel-debug").html("<b>Play</b><hr>"+JSON.stringify(jo,null,4)+"<br><br><b>Round</b><hr>"+JSON.stringify(xo,null,4)+"<br><br><b>Game</b><hr>"+JSON.stringify(Co,null,4)+"<br><br><b>Settings</b><hr>"+JSON.stringify($o,null,4)+"<br><br><b>Group</b><hr>"+JSON.stringify(ko,null,4)+"<br><br><b>User</b><hr>"+JSON.stringify(wo,null,4)+"<br><br><b>Session</b>: "+ho))}function ot(e){e=e||{};var t=[],o={},n={};return $.isEmptyObject(e)||(n.id="undefined"!=typeof $(e).data("id")?$(e).data("id"):Co.id,n.name="undefined"!=typeof $(e).data("name")?$(e).data("name"):Co.name,n.lang="undefined"!=typeof $(e).data("lang")?$(e).data("lang"):Co.lang,"undefined"==typeof io[n.lang]&&(t[t.length]="Invalid lang "+n.lang+".")),$("#start-langs").length&&(n.langs=$("#start-langs").val(),!$("#start-langs").val()||[5,6,7,8].indexOf(Co.id)>-1&&$("#start-langs").val().length<2?t[t.length]="Please select at least two langs":(n.langs=$("#start-langs").val(),o.langs=n.langs)),$("#start-user-name").length&&(o.name=$("#start-user-name").val()),$("#start-skill-level").length&&(n.skillLevel=parseInt($("#start-skill-level").val())),$("#start-knowledge-level").length&&(n.knowledgeLevel=parseInt($("#start-knowledge-level").val())),$("#start-choose-category").length&&(n["category-choose"]=st(parseInt($("#start-choose-category").val()),Co.id)),$("#start-choose-subject").length&&(n["subject-choose"]=it(parseInt($("#start-choose-subject").val()),Co.id)),$("#start-choose-topic").length&&(n["topic-choose"]=rt(parseInt($("#start-choose-topic").val()),Co.id)),$("#start-choose-lesson").length&&(n["lesson-choose"]=at(parseInt($("#start-choose-lesson").val()),Co.id)),$("#start-bonus-on").length&&(n["bonus-on"]=parseInt($("#start-bonus-on").val())),t.length?(alert(t.join("\n\n")),!1):($.isEmptyObject(o)||(wo.setProperties(o),wo.ga("User","start","user:"+wo.name)),$.isEmptyObject(n)||(jo.setProperties(n,!0),"undefined"!=typeof n.id&&Co.ga(Co.id+": "+Co.name,"game-user","user: "+wo.name)),nt(),tt(),!0)}function nt(){$("#embed-link").val(j()),$("#link-link").val(q({s:1}))}function st(e,t){return e=parseInt(e),t=t||!1,t&&e&&[1,3].indexOf(t)>=0?e:e}function at(e,t){return e=parseInt(e),t=t||!1,0}function it(e,t){return e=parseInt(e),t=t||!1,t&&e&&[1,3].indexOf(t)>=0?e:e}function rt(e,t){return e=parseInt(e),t=t||!1,e}function lt(){jo.ga(jo.id+": "+jo.name,"play-win",jo.topic.id+": "+jo.topic.name),jo.ga(jo.id+": "+jo.name,"skill"+jo.skillLevel+"-knowledge"+jo.knowledgeLevel+"-play-win",jo.topic.id+": "+jo.topic.name);for(var e=0;e<jo.thwords.ans.length;e++)$("#answer-"+e+" > .aux2").removeClass("hide").addClass("show");J("chars");var t={msg:"Congratulations",score:jo.point.count,perfectScore:jo.point.count==jo.point.total?1:0},o=Mustache.render(Tt,t)+me();K(o,{type:"success"}),jo.bonus.on>0&&c()>0?($("#btn-show-bonus").html(c()>1?"BONUS QUESTIONS":"BONUS QUESTION"),_e("show-bonus",!0),qe("start")):(_e("next-round",!0),Be(),qe("start"),qe("feedback",!1))}function ct(e){return parseInt(e)-11}function dt(){var e=$.cookie("debug")||0;return parseInt(e)?!0:!1}function ut(e){e&&(0==e?($.removeCookie("debug"),$("#show-debug-data").addClass("hide").removeClass("show")):($.cookie.json,$.cookie("debug",1),$("#show-debug-data").addClass("show").removeClass("hide")))}function pt(e,t,o,n){"use strict";t=t||{},o=o||{},this._initialized=!1,this._name=e,this._cookie=t.cookie||"Woggle-"+this._name,this._cookie.replace(/\W/g,""),this._parent=t.parent||{},this._autoStore=t.autoStore||1,this._initialProperties=o||{},this._validation=1,this._ts=Date.now(),this.addToCount=function(e,t,o,n){if("undefined"==typeof t)return alert("No points specified for "+this._name+" property "+e+" in addToCount method."),!1;"undefined"==typeof o&&(o=!0),"undefined"==typeof n&&(n=!0);var s=this.getPropertyName(e+"-count");if(s===!1)return alert("Invalid "+this._name+" property "+e+" in addToCount method."),!1;var a=s.split("-");return a.length>2?(alert("Invalid "+this._name+" property "+e+" in addToCount method."),!1):(this[a[0]][a[1]]=this[a[0]][a[1]]+t,this.reflowProperty(s),this[a[0]].hasOwnProperty("total")&&this[a[0]].hasOwnProperty("percent")&&(this[a[0]].percent=100*(this[a[0]].count/this[a[0]].total),this.reflowProperty(s.replace("-count","-percent"))),this._autoStore&&n&&this.store(),o&&!$.isEmptyObject(this._parent)&&this._parent.addToCount(e,t,o,n),this.updateTimeStamp(),!0)},this.addToTotal=function(e,t,o,n){if("undefined"==typeof t)return alert("No points specified for "+this._name+" property "+e+" in addToTotal method."),!1;"undefined"==typeof o&&(o=!0),"undefined"==typeof n&&(n=!0);var s=this.getPropertyName(e+"-total");if(s===!1)return alert("Invalid "+this._name+" property "+e+" in addToTotal method."),!1;var a=s.split("-");return a.length>2?(alert("Invalid "+this._name+" property "+e+" in addToTotal method."),!1):(this[a[0]][a[1]]=this[a[0]][a[1]]+t,this.reflowProperty(s),this[a[0]].hasOwnProperty("count")&&this[a[0]].hasOwnProperty("percent")&&(this[a[0]].percent=100*(this[a[0]].count/this[a[0]].total),this.reflowProperty(s.replace("-total","-percent"))),this._autoStore&&n&&this.store(),o&&!$.isEmptyObject(this._parent)&&this._parent.addToTotal(e,t,o,n),this.updateTimeStamp(),!0)},this.autoStore=function(e){return"undefined"!=typeof e?(this._autoStore=e,this):this._autoStore},this.ga=function(e,t,o){try{ga("send","event",e||this._name,t,o)}catch(n){}},this.getCookie=function(){return $.cookie(this._cookie)},this.getProperty=function(e){if(e.indexOf("-")>=0)var t=e.split("-");else var t=e.split("_");return this.hasOwnProperty(t[0])?2===t.length?this[t[0]].hasOwnProperty(t[1])?this[t[0]][t[1]]:(alert("2. Invalid "+this._name+" property "+e+"."),null):this[e]:(alert("Invalid "+this._name+" property "+e+"."),null)},this.getPropertyName=function(e,t){"undefined"==typeof t&&(t=!0);for(var e=e.replace("_","-"),o=!1,n=0;n<this._initialProperties.length;n++)if(e===this._initialProperties[n][0]||"undefined"!=typeof this._initialProperties[n][2]&&e===this._initialProperties[n][2]){o=this._initialProperties[n][0];break}if(o!==!1&&t){var s=o.split("-");if(2===s.length){if(!this.hasOwnProperty(s[0])||!this[s[0]].hasOwnProperty(s[1]))return!1}else if(!this.hasOwnProperty(s[0]))return!1}return o},this.load=function(e){if(e=e||[],!$.isEmptyObject(e))for(var t in e)e.hasOwnProperty(t)&&this.setProperty(t,e[t],!1,!1);this._autoStore&&this.store()},this.name=function(e){return"undefined"!=typeof e?(this._name=e,this):this._name},this.parseJSON=function(e){e=e||!1;for(var t={},o=0;o<this._initialProperties.length;o++)t[e?this._initialProperties[o][2]:this._initialProperties[o][0]]=this.getProperty(this._initialProperties[o][0]);return t},this.push=function(e,t,o){o=o||!1;var n=this.getPropertyName(e);if(n===!1)return alert("Invalid "+this._name+" property "+e+" in append method."),!1;var s=n.split("-");if(2===s.length){if(this[s[0]][s[1]].constructor!==Array)return alert(this._name+" property "+e+" in append method is not an array."),!1;this[s[0]][s[1]][this[s[0]][s[1]].length]=t,this[s[0]][s[1]].length>100&&this[s[0]][s[1]].length.shift(),this.reflowProperty(n)}else{if(this[s[0]].constructor!==Array)return alert(this._name+" property "+e+" in append method is not an array."),!1;this[s[0]][this[s[0]].length]=t,this[s[0]].length>100&&this[s[0]].length.shift(),this.reflowProperty(n)}return this._autoStore&&this.store(),o&&!$.isEmptyObject(this._parent)&&this._parent.push(e,t,o),this.updateTimeStamp(),!0},this.reflow=function(){for(var e=0;e<this._initialProperties.length;e++)this.reflowProperty(this._initialProperties[e][0])},this.reflowProperty=function(e){var t=this.getPropertyName(e);if(t!==!1){var o=this.getProperty(t);$("."+this._name+"-"+t).text(o)}},this.setProperties=function(e,t){"undefined"==typeof t&&(t=!0);var o=!1;for(var n in e)e.hasOwnProperty(n)&&(o=this.setProperty(n,e[n],t,!1)||o);return o&&this._autoStore&&this.store(),this.updateTimeStamp(),o},this.setProperty=function(e,t,o,n){"undefined"==typeof o&&(o=!1),"undefined"==typeof n&&(n=!0);var s=!1,a=this.getPropertyName(e,!1);if(a===!1)return this._validation>0&&alert("3. Invalid "+this._name+" property "+e+"."),s;if(a.indexOf("-")<0)var i=a.split("_");else var i=a.split("-");if(2===i.length){if(this.hasOwnProperty(i[0])){if(!this[i[0]].hasOwnProperty(i[1])&&this.initialized)return alert("5. Invalid "+this._name+" property "+e+"."),s}else{if(this._initialized)return alert("4. Invalid "+this._name+" property "+e+"."),s;this[i[0]]={}}this[i[0]][i[1]]!==t&&(s=!0),this[i[0]][i[1]]=t}else{if(!this.hasOwnProperty(i[0])&&this.initialized)return alert("6. Invalid "+this._name+" property "+e+"."),!1;this[i[0]]!==t&&(s=!0),this[i[0]]=t}return s&&(this.reflowProperty(e,t),n&&this._autoStore&&this.store()),o&&this.hasOwnProperty("_parent")&&"undefined"!=typeof this._parent.setProperty&&this._parent.setProperty(e,t,o,n),this.updateTimeStamp(),s},this.store=function(){var e=new Date;e.setTime(e.getTime()+63072e6),$.cookie.json,$.cookie(this._cookie,this.stringify(!0),{path:"/",expires:e})},this.stringify=function(e){return JSON.stringify(this.parseJSON(e||!1))},this.updateTimeStamp=function(){this._ts=Date.now(),"undefined"!=typeof this.timeStamp&&(this.timeStamp=this._ts)},this.validationOff=function(){this._validation=0},this.validationOn=function(){this._validation=1};for(var s=0;s<this._initialProperties.length;s++)this.setProperty(this._initialProperties[s][0],this._initialProperties[s][1],!1,!1);"undefined"!=typeof n?this.load(n):this._autoStore&&this.store(),this._initialized=!0,this.updateTimeStamp()}if(ut(A("debug")||!1),l(),"undefined"==typeof woggle||$.isEmptyObject(woggle))return $("#container-initializing").removeClass("show").addClass("hide"),$("#container-content").removeClass("hide").addClass("show"),!1;if("undefined"==typeof woggle.game||"undefined"==typeof woggle.game.id){try{$o.ga("Error","invalid-woggle",document.location.href+", woggle: "+woggle.stringify())}catch(ht){}return alert("Invalid woggle object."),$("#container-initializing").removeClass("show").addClass("hide"),$("#container-content").removeClass("hide").addClass("show"),!1}var gt=!1,ft="1.0.2",mt=2015,yt=[{id:1,name:"Thwords",shortName:"Thwords",abbrev:"TH",slug:"thwords",description:null,details:null,lang:"en",random:0,category_choose:0,subject_choose:0,topic_choose:0,lesson_choose:0,bonus_on:0,save_on:0},{id:2,name:"Thword Plays",shortName:"Thword Plays",abbrev:"TP",slug:"thword-plays",description:null,details:null,lang:"en",random:0,category_choose:0,subject_choose:0,topic_choose:1,lesson_choose:0,bonus_on:1,save_on:1},{id:3,name:"Anti-Thwords",shortName:"Anti-Thwords",abbrev:"AT",slug:"anti-thwords",description:null,details:null,lang:"en",random:0,category_choose:0,subject_choose:0,topic_choose:0,lesson_choose:0,bonus_on:0,save_on:0},{id:4,name:"Foreign Thwords",shortName:"Foreign Thwords",abbrev:"FT",slug:"foreign-thwords",description:null,details:null,lang:"es",random:0,category_choose:0,subject_choose:0,
    topic_choose:1,lesson_choose:0,bonus_on:1,save_on:1},{id:5,name:"Random Thwords",shortName:"Random Thwords",abbrev:"RT",slug:"random-thwords",description:null,details:null,lang:"en",random:1,category_choose:0,subject_choose:0,topic_choose:1,lesson_choose:0,bonus_on:0,save_on:0},{id:6,name:"Random Foreign Thwords",shortName:"Random Foreign",abbrev:"RFT",slug:"random-foreign-thwords",description:null,details:null,lang:"en",random:1,category_choose:0,subject_choose:0,topic_choose:1,lesson_choose:0,bonus_on:1,save_on:1},{id:7,name:"Totally Random Thwords",shortName:"Totally Random",abbrev:"TRT",slug:"totally-random-thwords",description:null,details:null,lang:"en",random:1,category_choose:0,subject_choose:0,topic_choose:1,lesson_choose:0,bonus_on:1,save_on:1},{id:8,name:"Language Drills",shortName:"Language Drills",abbrev:"LD",slug:"language-drills",description:null,details:null,lang:"en",random:1,category_choose:0,subject_choose:0,topic_choose:1,lesson_choose:0,bonus_on:1,save_on:1}],vt={overlayBackgroundOpacity:.5},bt=document.getElementById("about-template").innerHTML,$t=document.getElementById("answers-template").innerHTML,wt=document.getElementById("char-rack-template").innerHTML,kt=document.getElementById("choose-category-template").innerHTML,Ct=document.getElementById("choose-lesson-template").innerHTML,xt=document.getElementById("choose-subject-template").innerHTML,jt=document.getElementById("choose-topic-template").innerHTML,Tt=document.getElementById("congrats-msg-template").innerHTML,Ot=document.getElementById("end-of-game-overlay-template").innerHTML,St=document.getElementById("game-save-template").innerHTML,Lt=document.getElementById("game-stats-template").innerHTML,Pt=document.getElementById("general-feedback-template").innerHTML,It=document.getElementById("help-template").innerHTML,Dt=document.getElementById("high-scores-template").innerHTML,_t=(document.getElementById("initializing-template").innerHTML,document.getElementById("loading-template").innerHTML),Et=(document.getElementById("question-fill-in-the-blank-template").innerHTML,document.getElementById("question-multiple-choice-template").innerHTML),Nt=(document.getElementById("question-multi-select-template").innerHTML,document.getElementById("question-sequence-template").innerHTML,document.getElementById("question-text-template").innerHTML),qt=document.getElementById("round-stats-template").innerHTML,Qt=document.getElementById("settings-template").innerHTML,Mt=document.getElementById("start-settings-template").innerHTML,At=document.getElementById("tile-rack-template").innerHTML,Bt=document.getElementById("tile-values-template").innerHTML,Ft=document.getElementById("tile-values-table-template").innerHTML,Jt=document.getElementById("wrong-answer-template").innerHTML,Ht=T(woggle.game.id);if($.isEmptyObject(Ht)){try{$o.ga("Error","undefined-game-id",document.location.href+" : "+JSON.stringify(woggle))}catch(ht){}return alert("Game "+woggle.game.id+" not defined."),!1}var Yt=B(!0),Gt=$.cookie("Woggle-settings");Gt=Gt?$.parseJSON(Gt):{};var zt=$.cookie("Woggle-user");zt=zt?$.parseJSON(zt):{};var Rt=$.cookie("Woggle-group");Rt=Rt?$.parseJSON(Rt):{};var Wt=$.cookie("Woggle-game");Wt=Wt?$.parseJSON(Wt):{};var Ut=$.cookie("Woggle-round");Ut=Ut?$.parseJSON(Ut):{};var Kt=$.cookie("Woggle-play");Kt=Kt?$.parseJSON(Kt):{};var Vt=!0;if(!($.isEmptyObject(Gt)||$.isEmptyObject(zt)||$.isEmptyObject(Rt)||$.isEmptyObject(Wt)||$.isEmptyObject(Ut)||$.isEmptyObject(Kt))&&"undefined"!=typeof Wt.id&&"undefined"!=typeof Wt.ga&&parseInt(Wt.ga)>0)if(Wt.id==woggle.game.id)Vt=!1;else{if(!confirm("You currently have an active game of "+Wt.gn+".\n\nIf you continue you will lose that game.\n\nDo you want to start this new game anyway?"))return document.location.href=Wt.ur,!1;Vt=!0}var Xt="en";"undefined"!=typeof Wt.al&&(Xt=Wt.al);var Zt=2;"undefined"!=typeof Wt.gs&&(Zt=Wt.gs);var eo=2;"undefined"!=typeof Wt.gk&&(eo=Wt.gk),$("#container-content").removeClass("show").addClass("hide"),$("#container-initializing").removeClass("hide").addClass("show");try{ga("send","event","Game","initialize","woggle: "+JSON.stringify(woggle))}catch(ht){}var to,oo,no=[1,2,3,4],so=[1,2,3],ao=[6,7,8],io={de:"German",en:"English",es:"Spanish",fr:"French",is:"Icelandic",it:"Italian",pl:"Polish",pt:"Portuguese",ru:"Russian",tr:"Turkish",uk:"Ukrainian"},ro=["de","es","fr","is","it","pl","pt","ru","tr","uk"],lo=[{value:1,name:"Novice",abbrev:"N"},{value:2,name:"Amateur",abbrev:"A"},{value:3,name:"Pro",abbrev:"P"},{value:4,name:"Expert",abbrev:"E"}],co=[{value:0,name:"Elementary",abbrev:"el"},{value:1,name:"High School",abbrev:"hs"},{value:2,name:"College",abbrev:"co"},{value:3,name:"Graduate",abbrev:"gr"},{value:4,name:"Doctorate",abbrev:"do"},{value:5,name:"Genius",abbrev:"ge"},{value:6,name:"Super Genius",abbrev:"g+"}],uo=[],po="/api/",ho=x(),go=[["sessionId",ho,"se"],["domain",document.domain,"dm"],["apiDomain",null,"ad"],["apiDomains",[document.domain],"as"],["statsDomain",null,"sd"],["showAds",0,"ads"],["adUrl","http://ads.thwords.com/ad","adu"],["overlayDivDelay",0,"odd"],["overlayButtonDelay",500,"obd"],["tileFlipDelay",300,"tfd"],["timeStamp",Date.now(),"ts"]],fo=[["sessionId",ho,"se"],["id",null,"id"],["name",null,"na"],["username",null,"un"],["email",null,"em"],["lang","en","al"],["langs",[],"ap"],["timeStamp",Date.now(),"ts"]],mo=[["sessionId",ho,"se"],["id",null,"id"],["name",null,"na"],["timeStamp",Date.now(),"ts"]],yo=[["sessionId",ho,"se"],["id",-1,"id"],["status",-1,"ga"],["count",0,"go"],["name","Thwords","gn"],["shortName","Thwords","sn"],["abbrev","TH","ab"],["description",null,"gd"],["details",null,"gt"],["slug","thwords","gg"],["url",window.location.href,"ur"],["random",0,"gr"],["lang","en","al"],["langs",ro,"ap"],["knowledgeLevel",2,"gk"],["skillLevel",2,"gs"],["maxPlays",-1,"gm"],["category-choose",0,"cc"],["category-id",0,"ci"],["category-name",null,"cn"],["category-max",1,"cm"],["category-count",0,"co"],["category-played",[],"cp"],["subject-choose",0,"uc"],["subject-id",0,"ui"],["subject-name",null,"un"],["subject-max",1,"um"],["subject-count",0,"uo"],["subject-played",[],"up"],["topic-choose",0,"tc"],["topic-id",0,"ti"],["topic-name",null,"tn"],["topic-lang","en","tl"],["topic-description",null,"td"],["topic-details",null,"tt"],["topic-max",1,"tm"],["topic-count",0,"to"],["topic-played",[],"tp"],["lesson-choose",0,"lc"],["lesson-id",0,"li"],["lesson-name",null,"ln"],["lesson-max",1,"lm"],["lesson-count",0,"lo"],["lesson-played",[],"lp"],["thword-total",0,"zt"],["thword-count",0,"zc"],["thword-percent",null,"zp"],["move-max",0,"mm"],["move-total",0,"mt"],["move-count",0,"mc"],["move-percent",null,"mp"],["move-strikes",0,"mx"],["move-remaining",0,"mr"],["point-total",0,"pt"],["point-count",0,"pc"],["point-percent",null,"pp"],["bonus-on",1,"pb"],["bonus-total",0,"bt"],["bonus-count",0,"bc"],["bonus-value",0,"bv"],["bonus-percent",null,"bp"],["save-on",1,"ps"],["save-status",-1,"sa"],["save-total",0,"st"],["save-count",0,"sc"],["save-percent",null,"sp"],["hitStreak-current",0,"hc"],["hitStreak-long",0,"hl"],["thwords",{},"tz"],["char-played",[],"ch"],["tile-flipped",[],"tf"],["quiz",{},"qz"],["survey",{},"su"],["bonusQuestions",{},"bq"],["timeStamp",Date.now(),"ts"]],vo={"á":"a","à":"a","ä":"a","â":"a","å":"a","æ":"a","α":"a","ã":"a","ç":"c","é":"e","è":"e","ë":"e","ê":"e","ε":"e","η":"e","ğ":"g","í":"i","ì":"i","ï":"i","î":"i","ι":"i","ı":"i","ñ":"n","ó":"o","ò":"o","ö":"o","ô":"o","œ":"o","ο":"o","ω":"o","ø":"o","õ":"o","ş":"s","ú":"u","ù":"u","ü":"u","û":"u","υ":"u","ÿ":"y"};if(Vt){for(var bo in Ht)Ht.hasOwnProperty(bo)&&"undefined"==typeof woggle.game[bo]&&(woggle.game[bo]=Ht[bo]);var $o=new pt("settings",{},go,Gt);"undefined"==typeof woggle.settings||$.isEmptyObject(woggle.settings)||$.each(woggle.settings,function(e,t){$o.setProperty(e,t)});var wo=new pt("user",{},fo,zt),ko=new pt("group",{},mo,Rt),Co=new pt("game",{},yo,woggle.game||{}),xo=new pt("round",{parent:Co},yo,woggle.game||{}),jo=new pt("play",{parent:xo},yo,woggle.game||{});jo.setProperty("lang",Xt,!0),jo.setProperty("skillLevel",Zt,!0),jo.setProperty("knowledgeLevel",eo,!0)}else var $o=new pt("settings",{},go,Gt),wo=new pt("user",{},fo,zt),ko=new pt("group",{},mo,Rt),Co=new pt("game",{},yo,Wt),xo=new pt("round",{parent:Co},yo,Ut),jo=new pt("play",{parent:xo},yo,Kt);$o.getApiDomain=function(){return this.apiDomain?this.apiDomain:this.nextApiDomain()},$o.nextApiDomain=function(){if(0===this.apiDomains.length)return $o._validation&&($o.ga("Error","no-apiDomains-specified",document.location.href),alert("No apiDomains specified.")),null;if(1!==this.apiDomains.length&&this.apiDomain){for(var e=0;e<this.apiDomains.length;e++)if(this.apiDomains[e]===this.apiDomain){this.apiDomain=e+1<this.apiDomains.length?this.apiDomains[e+1]:this.apiDomains[0];break}return this.apiDomain}return this.setProperty("apiDomain",this.apiDomains[0]),this.apiDomain},$o.getStatsDomain=function(){return this.statsDomain?this.statsDomain:this.getApiDomain()},jo.adjustedBonusOn=function(){return Co.point.total>1e3?jo.bonus.on:Co.point.total>2e3?0:jo.bonus.on},jo.adjustedChooseCategory=function(){return Co.point.total>2e3?0:jo.category.choose},jo.adjustedChooseLesson=function(){return Co.point.total>2e3?0:jo.lesson.choose},jo.adjustedChooseSubject=function(){return Co.point.total>2e3?0:jo.subject.choose},jo.adjustedChooseTopic=function(){return Co.point.total>2e3?0:jo.topic.choose},jo.adjustedKnowledgeLevel=function(){return Co.point.total>1e3?this.knowledgeLevel<3?this.knowledgeLevel+1:this.knowledgeLevel:Co.point.total>2500?4:this.knowledgeLevel},jo.adjustedSkillLevel=function(){return Co.point.total>1e3?this.skillLevel<3?this.skillLevel+1:this.skillLevel:Co.point.total>2500?4:this.skillLevel},jo.generateQuestion=function(e,t,o){o=o||{};var n="undefined"!=typeof o.points?o.points:1,s={t:"undefined"!=typeof o.qType?o.qType:"mc",q:e,a:null,o:[],c:null,p:n};if(t.constructor.toString().indexOf("Array")>-1){if("undefined"==typeof o.idx)return this.ga("Error","generateQuestions-no-index-specified","answers: "+JSON.stringify(t)),alert("generateQuestions method no index specified, answers: "+JSON.stringify(t)),!1;if("undefined"==typeof t[o.idx])return this.ga("Error","generateQuestions-invalid-idx","answers: "+JSON.stringify(t)),alert("generateQuestions method invalid idx "+o.idx+", answers: "+JSON.stringify(t)),!1;switch(s.a=t[o.idx],s.t){case"tx":s.a=e,s.q=t[o.idx];break;case"tf":case"yn":if(Math.random()<.5)s.c=0,s.q=s.q+" = "+s.a;else{s.c=1;var a="",i=[];$.each(t,function(e,t){i[i.length]={idx:e,label:t}}),i=Re(i);for(var r=0;r<i.length;r++)i[r].idx!=o.idx&&(a=i[r].label);s.q=s.q+" = "+a}s.o="tf"==s.t?["True","False"]:["Yes","No"];break;case"mc":default:if(v(t))return!1;var i=[];$.each(t,function(e,t){i[i.length]={idx:e,label:t}}),i=Re(i);for(var r=0;r<i.length;r++)s.o[s.o.length]=i[r].label,i[r].idx==o.idx&&(s.c=r)}}else s.t="tx",s.a=t;return s},jo.generateBonusQuestions=function(){if(this.bonusQuestions={},this.bonusQuestions.questions=[],!$.isEmptyObject(jo)&&!$.isEmptyObject(this.thwords)&&"undefined"!=typeof this.thwords.ans&&this.thwords.ans.length>1&&"undefined"!=typeof this.thwords.aux1&&this.thwords.ans.length===this.thwords.aux1.length)if(4==this.id)try{for(var e=[],t=0;t<this.thwords.ans.length;t++){var o=this.generateQuestion(this.thwords.ans[t],this.thwords.aux1,{idx:t,qType:jo.getQuestionType(this.thwords.ans[s],{gameId:this.id,lang:this.lang})});o!==!1&&(e[e.length]=o)}this.bonusQuestions.questions=Re(e)}catch(n){console.log(n),this.ga("Error","generateBonusQuestions: multiple",n.toString())}else try{var s=Math.floor(Math.random()*this.thwords.aux1.length);if(this.thwords.aux1[s]){var o=this.generateQuestion(this.thwords.ans[s],this.thwords.aux1,{idx:s,qType:jo.getQuestionType(this.thwords.ans[s])});o!==!1&&(this.bonusQuestions.questions=[o])}}catch(n){this.ga("Error","generateBonusQuestions: single",n.toString()),console.log(n)}this.bonusQuestions.idx=this.bonusQuestions.questions.length>0?0:9999},jo.getQuestionType=function(e,t){e=e||"",t=t||{};var o=("undefined"!=typeof t.gameId?t.gameId:-1,"undefined"!=typeof t.lang?t.lang:"en");if(2==jo.id)return"mc";if(4!=jo.id)return!1;var n=this.adjustedSkillLevel(),s=Math.random();switch(n){case 3:return.2>s?["ru","uk"].indexOf(o)>-1?"mc":e.length<=12?"tx":"mc":.4>s?"tf":"mc";case 4:return.4>s?["ru","uk"].indexOf(o)>-1?"mc":e.length<=15?"tx":"mc":.6>s?"tf":"mc";case 0:case 1:case 2:default:return.25>s?"tf":"mc"}},dt()&&(window.thwordData={settings:$o,user:wo,group:ko,game:Co,round:xo,play:jo}),ne(),nt(),1==A("s")?Co.ga(Co.id+": "+Co.name,"start-shared","url: "+document.location.href):1==A("e")?Co.ga(Co.id+": "+Co.name,"start-embed","url: "+document.location.href):Co.ga(Co.id+": "+Co.name,"start-new","url: "+document.location.href),tt(),a(),$("#container-content").removeClass("hide").addClass("show"),$("#container-initializing").removeClass("show").addClass("hide"),r(),document.location.toString().toLowerCase().indexOf("/next/")<0?F():$("#overlay-ad").removeClass("hide").addClass("show"),Ne(),Vt?Ye():We();var To=function(e){var t=parseInt($(e).data("idx")),n=parseInt($(e).data("option")),s=jo.bonusQuestions.questions[t].c,a=jo.bonusQuestions.questions[t].p;if(n==s){o(a),jo.addToCount("bonus",1,!0);var i="Correct";if(["tf","yn"].indexOf(jo.bonusQuestions.questions[t].t)>-1&&jo.bonusQuestions.questions[t].c>0){i+="<p>The right answer is "+jo.bonusQuestions.questions[t].a+".</p>";var r=5e3}else var r=$o.overlayButtonDelay;$("#submit-question-answer").removeClass("show").addClass("hide"),U(i,{type:"success","class":"process-bonus",data:{idx:t,option:n,correct:s,points:a},timeout:r})}else U(Mustache.render(Jt,{correctAnswer:jo.bonusQuestions.questions[t].a}),{type:"error","class":"process-bonus",data:{idx:t,option:n,correct:s,points:a},timeout:0})},Oo=function(e){if("undefined"==typeof $(e).data("category-id"))return alert("No category selected."),!1;if(parseInt($(e).data("category-id"))>0)var t=parseInt($(e).data("category-id")),o=$(e).text();else var t=0,o="WILD CARD";jo.ga(jo.id+": "+jo.name,"category-select",t+": "+o);try{jo.adjustedChooseSubject()>0?m():jo.adjustedChooseTopic()>0?y():b({category_id:t})}catch(n){console.log(n),$o.ga("Error","selectCategory",n.toString())}},So=function(e){if("undefined"==typeof $(e).data("lesson-id"))return alert("No lesson selected."),!1;if(parseInt($(e).data("lesson-id"))>0)var t=parseInt($(e).data("lesson-id")),o=$(e).text();else var t=0,o="WILD CARD";jo.ga(jo.id+": "+jo.name,"lesson-select",t+": "+o);try{b({lesson_id:t})}catch(n){console.log(n),$o.ga("Error","selectLesson",n.toString())}},Lo=function(e){if("undefined"==typeof $(e).data("subject-id"))return alert("No subject selected."),!1;if(parseInt($(e).data("subject-id"))>0)var t=parseInt($(e).data("subject-id")),o=$(e).text();else var t=0,o="WILD CARD";jo.ga(jo.id+": "+jo.name,"subject-select",t+": "+o);try{jo.adjustedChooseTopic()>0?y():b({subject_id:t})}catch(n){console.log(n),$o.ga("Error","selectSubject",n.toString())}},Po=function(e){if(Ce(),"undefined"==typeof $(e).data("topic-id"))return alert("No topic selected."),!1;if(parseInt($(e).data("topic-id"))>0)var t=parseInt($(e).data("topic-id")),o=$(e).text();else var t=0,o="WILD CARD";jo.ga(jo.id+": "+jo.name,"topic-select",t+": "+o);try{b({topic_id:t})}catch(n){console.log(n),$o.ga("Error","selectTopic",n.toString())}},Io=function(e){var t=$(e).data("idx")||!1;try{if(t)if($(e).hasClass("chosen"));else{$(e).addClass("chosen");var o=jo.thwords.chs[t].v,n=z(t);if(n>0){var o=o*n,s=n+(1==n?" match!":" matches!");s+="<br>"+o+(1==o?" point.":" points."),U(s,{type:"success","class":"process-char",data:{idx:t},timeout:$o.overlayButtonDelay,opacity:!1})}else{var a=Math.abs(ct(o)),s="Strike!";s+="<br>You lose "+a+(1==a?" point":" points."),U(s,{type:"fail","class":"process-char",data:{idx:t},timeout:$o.overlayButtonDelay,opacity:!1})}}else alert("No index.")}catch(i){console.log(i),$o.ga("Error","selectChar",i.toString())}}}()});